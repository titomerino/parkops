{% extends "shell/base.html" %}

{% block title %}ParkOps / Salida{% endblock %}
{% block page_title %}Parking{% endblock %}

{% block content %}

<!-- Header -->
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h6 mb-0">Salida de parqueo</h2>
    <a href="{% url 'search_plate' %}" class="btn btn-dark rounded-pill">
        <i class="bi bi-arrow-left"></i>
        Ir atras
    </a>
</div>

{% include 'shell/partials/_messages_alert.html' with messages=messages %}

<!-- Card principal -->
<div class="card bg-dark text-light border-0 shadow-lg rounded-4">

    <div class="card-body p-4">

        <!-- Mensual -->
        {% if is_monthly %}
        <div class="alert alert-warning d-flex align-items-center">
            <i class="bi bi-check-circle-fill me-2"></i>
            <div>Suscripción mensual activa</div>
        </div>
        {% endif %}

        <!-- Placa -->
        <div class="text-center mb-3">
            <div class="text-muted small">Vehículo</div>
            <div class="display-6 fw-bold tracking-wide">
                {{ entry.plate }}
            </div>
        </div>

        <!-- Monto destacado -->
        <div class="bg-black-custom rounded-4 p-3 text-center mb-3">
            <div class="text-muted small">
                {% if is_monthly %}Monto del día{% else %}Total a pagar{% endif %}
            </div>
            <div class="display-5 fw-bold text-success">
                ${{ amount|floatformat:2 }}
            </div>
        </div>

        <!-- Detalles -->
        <div class="row small text-muted mb-3">
            <div class="col-6">
                <i class="bi bi-clock-history me-1"></i>
                Entrada<br>
                <strong class="text-light">
                    {{ entry.entry_date_hour|date:"d/m/Y h:i A" }}
                </strong>
            </div>

            <div class="col-6 text-end">
                <i class="bi bi-hourglass-split me-1"></i>
                Tiempo<br>
                <strong class="text-light">
                    {{ hours }} horas
                </strong>
            </div>
        </div>

        <!-- Form -->
        <form method="POST">
            {% csrf_token %}

            <button class="btn btn-success w-100 rounded-pill shadow-sm">
                <i class="bi bi-cash-coin me-1"></i>
                {% if is_monthly %}
                    Confirmar salida
                {% else %}
                    Cobrar y salir
                {% endif %}
            </button>
        </form>

    </div>
</div>

<!-- Tip -->
<div class="text-center small text-muted mt-3">
    Toque una vez para confirmar
</div>

{% endblock %}
